<!DOCTYPE html>
<html lang="ja" ng-app="app">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Remember Tunes</title>
    <link rel="stylesheet" type="text/css" href="bower_components/angular-loading-bar/build/loading-bar.min.css">
    <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  </head>

  <body style="margin:5px">

    <div ng-controller="appCtrl">

      <div id="app-header">
        <h1>Search Tunes</h1>
        <div class="input-group">
          <span class="input-group-addon"> </span>
          <input type="text" class="form-control" ng-model="query" ng-change="search()" placeholder="track name">
        </div>
        <span class="glyphicon glyphicon-star-empty"></span>:{{starred}}
        <h2>Search Results</h2>
        <p ng-show="isInitialized()">Input query above.</p>
        <p ng-show="!results.length && query">No results for "{{query}}"</p>
      </div>

      <div id="search-result">
        <ul ng-show="results.length" class="media-list">
          <li ng-repeat="result in results" ng-controller="trackCtrl" class="media">
            <a class="pull-left" href="#">
              <div style="width:100px; height:100px;">
                <img class="media-object" ng-src="{{result.artworkUrl100}}" alt="{{result.trackName}}">
              </div>
            </a>
            <div id="media-body">
              <h4 class="media-heading" style="text-overflow:ellipsis;">{{result.trackName}}</h4>
              <p style="text-overflow:ellipsis;">by {{result.artistName}}</p>

              <div class="track-control">
                <!-- player -->
                <button type="button" ng-click="play()" ng-hide="result.isPlaying" class="btn btn-default">
                  <span class="glyphicon glyphicon-play"></span>
                </button>
                <button type="button" ng-click="stop()" ng-show="result.isPlaying" class="btn btn-default">
                  <span class="glyphicon glyphicon-stop"></span>
                </button>
                <!-- invisible -->
                <audio src="{{trustSrc(result.isPlaying ? result.previewUrl : '')}}" autoplay></audio>

                <!-- star -->
                <button type="button" ng-click="star()" ng-hide="result.isStarred" class="btn btn-default">
                  <span class="glyphicon glyphicon-star-empty"></span>
                </button>
                <button type="button" ng-click="unStar()" ng-show="result.isStarred" class="btn btn-default">
                  <span class="glyphicon glyphicon-star"></span>
                </button>

                <span ng-show="result.isPlaying">
                  <span class="glyphicon glyphicon-volume-up" ></span>
                  <span class="badge">Now Playing</span>
                </span>
              </div>
            </div>
          </li>
        </ul>

      </div>

    </div>
    <script type="text/javascript" src="bower_components/angular/angular.js"></script>
    <script type="text/javascript" src="bower_components/angular-loading-bar/build/loading-bar.min.js"></script>
    <script type="text/javascript" src="bower_components/lodash/dist/lodash.min.js"></script>
    <script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
  </body>

</html>
